"use strict";OJ.extendClass(OjElement,"OjStyleElement",{_props_:{id:null,name:null,owner:null},_classes:null,_min_width:null,_max_width:null,_min_height:null,_max_height:null,_borderSize:null,_margin:null,_padding:null,_alpha:1,_depth:0,_overflow:null,_origin:"0px 0px",_rotation:0,_translate:"0px 0px",_h_align:null,_v_align:null,_compile_:function(b){var a=OjStyleElement;if(a.STYLE_MODE==a.STYLE_IE){this._getStyle=this._getStyleIe}else{if(a.STYLE_MODE==a.STYLE_BACKUP){this._getStyle=this._getStyleBackup}}b._style_funcs_.call(this,"margin","Margin");b._style_funcs_.call(this,"padding","Padding")},_style_funcs_:function(b,a){this["get"+a]=function(){return this._getStyler(b,arguments)};this["set"+a]=function(c){this._setStyler(b,arguments)};this["get"+a+"Bottom"]=function(){return this["get"+a](2)};this["set"+a+"Bottom"]=function(c){this["set"+a](null,null,c,null)};this["get"+a+"Left"]=function(){return this["get"+a](3)};this["set"+a+"Left"]=function(c){this["set"+a](null,null,null,c)};this["get"+a+"Right"]=function(){return this["get"+a](1)};this["set"+a+"Right"]=function(c){this["set"+a](null,c,null,null)};this["get"+a+"Top"]=function(){return this["get"+a](0)};this["set"+a+"Top"]=function(c){this["set"+a](c,null,null,null)}},_constructor:function(){var f,d,e=arguments.length;if(e&&(f=arguments[0])){if(e>1){d=arguments[1]}if(f&&!f.nodeType){if(f==="body"||f==document||f==document.body){f=document.body}else{if(isString(f)){var c;f=f.trim();if(f.charAt(0)=="<"&&f.slice(-1)==">"&&f.length>=5){var a=f.substr(0,6).toLowerCase(),b=a.substr(0,3);if(a=="<thead"||a=="<tbody"||a=="<tfoot"){c=OjElement.elm("table")}else{if(b=="<tr"){c=OjElement.elm("tbody")}else{if(b=="<td"||b=="<th"){c=OjElement.elm("tr")}else{c=OjElement.elm("div")}}}c.innerHTML=f;if(c.childNodes.length){c.removeChild(f=c.childNodes[0])}else{f=null}}else{}}}}}this._super("OjStyleElement","_constructor",[f,d])},_destructor:function(){var a=arguments,c=a.length?a[0]:0;if(this._children&&c){var b=this._children.length;while(b-->0){OJ.destroy(this._children[b],c)}}this._children=this._owner=null;return this._super("OjStyleElement","_destructor",arguments)},_processAttributes:function(a){var d=this._dom,f,b;this._classes=[];if(b=d.getAttribute(f="class")){d.removeAttribute(f);this.addClass(b)}if(b=d.getAttribute(f="var")){if(!isEmpty(b)&&a){(a[b]=this).addClasses(b);this.setOwner(a)}d.removeAttribute(f)}d.removeAttribute("class-name");d.removeAttribute("class-path");var i=d.attributes,g=i.length,c,h,e;for(;g--;){f=i[g].nodeName;b=i[g].value;if(f.substr(0,3)=="on-"){c=b.split(".");h=c.length==1;e=a;if(!h){switch(c[0]){case"this":e=this;break;case"window":e=window;break}}this.addEventListener(OJ.attributeToFunc(f),e,h?c[0]:c[1]);d.removeAttribute(f)}else{c=OjStyleElement.attributeToSetter(f);if(isFunction(this[c])){d.removeAttribute(f);if(b==""){b=null}else{if(isNumeric(b)){b=parseFloat(b)}}this[c](b)}}}},_processChildren:function(b){var a=this._dom.childNodes,c=a.length,d;this._children=[];while(c-->0){d=this._processChild(a[c],b);if(d){d._setParent(this);this._children.unshift(d)}else{if(isNull(d)&&a[c]){this._dom.removeChild(a[c])}}}},_processChild:function(c,d){if(!c){return}var a=c.tagName;if(!a||OjElement.isTextNode(c)){return isEmpty(c.nodeValue)?null:new OjTextElement(c)}var f,b=c.getAttribute("class-name");a=a.toLowerCase();if(a=="script"||a=="link"){return false}var e;if(!window[b]&&(e=c.getAttribute("class-path"))){OJ.importJs(e)}if(OjStyleElement.isComponentTag(a)){b=OjStyleElement.getTagComponent(a)}if(b){if(isFunction(b)){f=b(c)}else{f=new window[b]()}f._setDomSource(c,d)}else{f=new OjStyleElement(c,d)}return f},_setDom:function(b,c){this._super("OjStyleElement","_setDom",arguments);this._processAttributes(c);this._processChildren(c);this._classes=b.className.split(" ");var a=this._getStyle("text-align");var d=this._getStyle("vertical-align");this.setHorzAlign(isEmpty(a)?OjStyleElement.LEFT:a);this.setVertAlign(isEmpty(d)?OjStyleElement.TOP:d);if(!this._id){this.setId(this._id_)}},_setIsDisplayed:function(a){if(this._is_displayed==a){return}this._super("OjStyleElement","_setIsDisplayed",arguments);var b=this.numChildren();for(;b--;){this.getChildAt(b)._setIsDisplayed(this._is_displayed)}},addChild:function(a){return this.addChildAt(a,this.numChildren())},addChildAt:function(b,a){if(this.hasChild(b)){return b}if(b._parent){b._parent.removeChild(b)}if(a>=this.numChildren()){a=this.numChildren();this._dom.appendChild(b._dom)}else{this._dom.insertBefore(b._dom,this._dom.childNodes[a])}this._children.splice(a,0,b);b._setParent(this);return b},getChildAt:function(a){return this._children[a]},getChildren:function(){return this._children.clone()},indexOfChild:function(a){return this._children.indexOf(a)},hasChild:function(a){return a._parent==this},numChildren:function(){return this._children.length},moveChild:function(c,a){if(this.hasChild(c)){var b=this.indexOfChild(c);this._children.splice(b,1);this._dom.removeChild(c._dom);this._dom.insertBefore(c._dom,this._children[a]._dom);this._children.splice(a,0,c);return}},removeAllChildren:function(){var b=this._children.length,a=[];while(b-->0){a.unshift(this.removeChildAt(b))}return a},removeChild:function(a){return this.removeChildAt(this.indexOfChild(a))},removeChildAt:function(a){if(a<0){return null}var c=this._children.splice(a,1)[0];try{this._dom.removeChild(c._dom);c._setParent(null)}catch(b){}return c},replaceChild:function(b,a){return this.replaceChildAt(a,this.indexOfChild(b))},replaceChildAt:function(c,a){var b;if(a>=this.numChildren()){this.addChild(c)}else{b=this.removeChildAt(a);this.addChildAt(c,a)}return b},blur:function(){if(isFunction(this._dom.blur)){this._dom.blur()}},find:function(a){if(isElement(a)){a="#"+a.id()}return OJ.query(a,this._dom)},focus:function(){if(isFunction(this._dom.focus)){this._dom.focus()}},hide:function(){this.addClasses("hidden");this.dispatchEvent(new OjEvent(OjEvent.HIDE))},isVisible:function(){return this._getStyle("display")!=OjStyleElement.NONE&&this._getStyle("visibility")!="hidden"&&this._alpha>0&&this.getWidth()>0&&this.getHeight()>0},show:function(){this.removeClasses("hidden");this.dispatchEvent(new OjEvent(OjEvent.SHOW))},_getStyleBackup:function(a){return this._proxy.style[a]},_getStyleIe:function(a){return this._proxy.currentStyle[a]},_getStyle:function(a){return document.defaultView.getComputedStyle(this._proxy,null)[a]},_setStyle:function(a,b){return this._proxy.style[a]=b},_getStyleNumber:function(b){var a=this._getStyle(b);if(!a||a==OjStyleElement.NONE){return 0}return parseFloat(a.replaceAll(["px","%","pt","em"],""))},_setStyleNumber:function(b,a){this._setStyle(b,a+(arguments.length>2?arguments[2]:this._getStyleUnit(b)))},_getStyler:function(c,a){if(!this["_"+c]){var b=c=="font"||c=="line"?OJ.setting("fontUnit"):OJ.setting("dimUnit");this["_"+c]=[this._getStyle(c+"Top").replaceAll(b,""),this._getStyle(c+"Right").replaceAll(b,""),this._getStyle(c+"Bottom").replaceAll(b,""),this._getStyle(c+"Left").replaceAll(b,"")]}return a&&a.length?this["_"+c][a[0]]:this["_"+c]},_setStyler:function(f,c){this._getStyler(f);var e,d="",b=c.length,a=this._getStyleUnit(f);e=c[0];if(b==1){c=[e,e,e,e]}else{if(b==2){c=[e,c[1],e,c[1]]}else{if(b==3){c=[e,c[1],c[2],c[1]]}}}b=4;for(;b--;){e=c[b];if(isNull(e)){e=this["_"+f][b]}d=(b?" ":"")+e+a+d}this._setStyle(f,d)},_getStyleUnit:function(a){a=a.substr(0,4);if(a=="font"||a=="line"){return OJ.setting("fontUnit")}return OJ.setting("dimUnit")},getAttr:function(a){return this._proxy.getAttribute(a)},setAttr:function(a){if(arguments.length==1){if(isEmpty(a.value)){this._proxy.removeAttribute(a.nodeName)}else{this._proxy.setAttribute(a.nodeName,a.value)}}else{if(isSet(arguments[1])){this._proxy.setAttribute(a,arguments[1])}else{this._proxy.removeAttribute(a)}}},setId:function(a){if(this._id==a){return}this._dom.id=this._id=a},setName:function(a){if(this._name==a){return}this.setAttr("name",this._name=a)},getText:function(){return this._dom.innerHTML},setText:function(a){this.removeAllChildren();this._dom.innerHTML=a?a.toString():null},addClass:function(a){this.addClasses.apply(this,a.split(" "))},addClasses:function(a){var b=arguments.length,c;for(;b--;){if(!isEmpty(c=arguments[b].trim())&&this._classes.indexOf(c)==-1){this._classes.push(c)}}this._proxy.className=this._classes.join(" ")},getClasses:function(){return this._classes.clone()},setClasses:function(a){this._classes=a.clone();this._proxy.className=this._classes.join(" ")},hasClass:function(a){this.hasClasses.apply(this,a.split(" "))},hasClasses:function(a){var b=arguments.length;while(b-->0){if(this._classes.indexOf(arguments[b])==-1){return false}}return true},hitTest:function(a){return this.hitTestRect(a.getRect())},hitTestRect:function(b){var a=this.getRect();return(b.top>=a.top&&b.top<=a.bottom&&b.left>=a.left&&b.left<=a.right)||(b.top>=a.top&&b.top<=a.bottom&&b.right>=a.left&&b.right<=a.right)||(b.bottom>=a.top&&b.bottom<=a.bottom&&b.left>=a.left&&b.left<=a.right)||(b.bottom>=a.top&&b.bottom<=a.bottom&&b.right>=a.left&&b.right<=a.right)},hitTestPoint:function(a,c){var b=this.getRect();return a>=b.left&&a<=b.right&&c>=b.top&&c<=b.bottom},localPoint:function(a){},localX:function(a){return a-this.getPageX()},localY:function(a){return a-this.getPageY()},removeClass:function(a){this.removeClasses.apply(this,a.split(" "))},removeClasses:function(b){var c=arguments.length,a;while(c-->0){if((a=this._classes.indexOf(arguments[c]))!=-1){this._classes.splice(a,1)}}this._proxy.className=this._classes.join(" ")},toggleClass:function(a){this.toggleClasses.apply(this.class_str.slit(" "))},toggleClasses:function(b){var c=arguments.length,d=[],a=[];while(c-->0){if(this._classes.indexOf(arguments[c])==-1){d.push(arguments[c])}else{a.push(arguments[c])}}if(d.length){this.addClasses(d)}if(a.length){this.removeClasses(a)}},getInnerWidth:function(){return this.getWidth()-this.getPaddingLeft()-this.getPaddingRight()},setInnerWidth:function(a){this._setStyleNumber("width",Math.round(a))},getOuterWidth:function(){return this.getWidth()+this.getMarginLeft()+Math.abs(this.getMarginRight())},setOuterWidth:function(a){this.setInnerWidth(a-this.getPaddingLeft()-this.getPaddingRight()-this.getMarginLeft()-Math.abs(this.getMarginRight()))},getWidth:function(){return this._proxy.offsetWidth||this._getStyleNumber("width")},setWidth:function(a){if(a==OjStyleElement.AUTO){this._setStyle("width",null)}else{if(arguments.length>1){this._setStyle("width",a+(isString(arguments[1])?arguments[1]:"%"))}else{this.setInnerWidth(a-this.getPaddingLeft()-this.getPaddingRight())}}},getMinWidth:function(){return isNull(this._min_width)?this._min_width=this._getStyleNumber("minWidth"):this._min_width},setMinWidth:function(a){this._setStyleNumber("minWidth",this._min_width=a)},getMaxWidth:function(){return isNull(this._max_width)?this._max_width=this._getStyleNumber("maxWidth"):this._max_width},setMaxWidth:function(a){this._setStyleNumber("maxWidth",this._max_width=a)},getInnerHeight:function(){return this.getHeight()-this.getPaddingTop()-this.getPaddingBottom()},setInnerHeight:function(a){this._setStyleNumber("height",Math.round(a))},getOuterHeight:function(){return this.getHeight()+this.getMarginTop()+Math.abs(this.getMarginBottom())},setOuterHeight:function(a){this.setInnerHeight(a-this.getPaddingTop()-this.getPaddingBottom()-this.getMarginTop()-Math.abs(this.getMarginBottom()))},getHeight:function(){return this._proxy.offsetHeight||this._getStyleNumber("height")},setHeight:function(a){if(a==OjStyleElement.AUTO){this._setStyle("height",null)}else{if(arguments.length>1){this._setStyle("height",a+(isString(arguments[1])?arguments[1]:"%"))}else{this.setInnerHeight(a-this.getPaddingTop()-this.getPaddingBottom())}}},getMinHeight:function(){return isNull(this._min_height)?this._min_height=this._getStyleNumber("minHeight"):this._min_height},setMinHeight:function(a){this._min_height=a;this._setStyleNumber("minHeight",a)},getMaxHeight:function(){return isNull(this._max_height)?this._max_height=this._getStyleNumber("maxHeight"):this._max_height},setMaxHeight:function(a){this._max_height=a;this._setStyleNumber("maxHeight",a)},setPercentWidth:function(a){this._setStyleNumber("width",a,"%")},setPercentHeight:function(a){this._setStyleNumber("height",a,"%")},getX:function(){return this._proxy.offsetLeft},getPageX:function(){if(this._dom.getBoundingClientRect){return this._dom.getBoundingClientRect().left}},setX:function(a){this._setStyleNumber("left",a)},getY:function(){return this._proxy.offsetTop},getPageY:function(){if(this._dom.getBoundingClientRect){return this._dom.getBoundingClientRect().top}},setY:function(a){this._setStyleNumber("top",a)},getAlpha:function(){return this._alpha},setAlpha:function(a){this._alpha=this._setStyle("opacity",a)},getBackgroundColor:function(){return this._getStyle("background-color")},setBackgroundColor:function(a){this._setStyle("background-color",a)},getDepth:function(){return this._depth},setDepth:function(a){this._depth=this._setStyle("zIndex",a)},getHorzAlign:function(){return this._h_align},setHorzAlign:function(a){if(this._h_align==a){return}if(this._h_align){this.removeClasses("halign-"+this._h_align)}if((this._h_align=a)==OjStyleElement.LEFT){return}this.addClasses("halign-"+this._h_align)},getOverflow:function(){return this._overflow},setOverflow:function(a){this._overflow=this._setStyle("overflow",a)},getRect:function(){return OJ.makeRect(this.getPageX(),this.getPageY(),this.getWidth(),this.getHeight())},setRect:function(a){},getScrollHeight:function(){return this._proxy.scrollHeight},setScrollHeight:function(a){this._proxy.scrollHeight=a},getScrollWidth:function(){return this._proxy.scrollWidth},setScrollWidth:function(a){this._proxy.scrollWidth=a},getScrollX:function(){return this._proxy.scrollLeft},setScrollX:function(a){this._proxy.scrollLeft=a},getScrollY:function(){return this._proxy.scrollTop},setScrollY:function(a){this._proxy.scrollTop=a},getVertAlign:function(){return this._v_align},setVertAlign:function(a){if(this._v_align==a){return}if(this._v_align){this.removeClasses("valign-"+this._v_align)}if((this._v_align=a)==OjStyleElement.TOP){return}this.addClasses("valign-"+this._v_align)},_updateTransform:function(){var a="rotate("+this._rotation+"deg) translate("+this._translate+")";var b=OJ.getCssPrefix();if(b=="-moz-"){this._setStyle("MozTransform",a)}else{this._setStyle(b+"transform",a)}this._setStyle("transform",a)},getOrigin:function(){return this._origin},setOrigin:function(a){this._setStyle(OJ.getCssPrefix()+"transform-origin",a);this._setStyle("transform-origin",this._origin=a)},getRotation:function(){return this._rotation},setRotation:function(a){if(this._rotation==a){return}this._rotation=a;this._updateTransform()},getTranslate:function(){return this._translate},setTranslate:function(a){if(this._translate==a){return}this._translate=a;this._updateTransform()}},{COMPONENT_TAGS:{},STYLE_BACKUP:"styleBackup",STYLE_DEFAULT:"styleDefault",STYLE_IE:"styleIE",STYLE_MODE:(function(){var a=OjElement.elm("div");if(a.currentStyle){return"styleIE"}if(!document.defaultView||!document.defaultView.getComputedStyle){return"styleBackup"}return"styleDefault"})(),AUTO:"auto",BLOCK:"block",HIDDEN:"hidden",NONE:"none",SCROLL:"scroll",VISIBLE:"visible",LEFT:"left",CENTER:"center",RIGHT:"right",TOP:"top",MIDDLE:"middle",BOTTOM:"bottom",attributeToGetter:function(a){return"get"+OJ.attributeToFunc(a).ucFirst()},attributeToSetter:function(a){return"set"+OJ.attributeToFunc(a).ucFirst()},getTagComponent:function(a){return this.COMPONENT_TAGS[a]},isComponentTag:function(a){return isSet(this.COMPONENT_TAGS[a])},registerComponentTag:function(a,b){this.COMPONENT_TAGS[a]=b;if(this._browser==this.IE&&this._browser_version<9){document.createElement(a)}}});