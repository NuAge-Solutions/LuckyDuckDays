OJ.importJs("oj.components.Component");OJ.importCss("oj.form.Input");"use strict";OJ.extendClass(OjComponent,"OjInput",{_props_:{"default":null,name:null,prefix:null,required:false,suffix:null,validators:null,value:null},_errors:null,_ready:false,_template:"oj.form.Input",_constructor:function(){this._super("OjInput","_constructor",[]);var a=arguments.length;this._errors=[];this._validators=[];if(a){this.setName(arguments[0]);if(a>1){this.setLabel(arguments[1]);if(a>2){this.setValue(arguments[2]);if(a>3){this.setValidators(arguments[3])}}}}if(!this._label){this.setLabel(this._label)}if(this.input){if(!this._value){this.setValue(this.input._dom.value)}this.input.addEventListener(OjFocusEvent.IN,this,"_onFocusIn");this.input.addEventListener(OjFocusEvent.OUT,this,"_onFocusOut");this.input.addEventListener(OjDomEvent.CHANGE,this,"_onChange")}if(this.className()=="OjInput"){this.hide()}else{a=this._class_names.length;while(a-->0){this.addClasses(this._class_names[a]);if(this._class_names[a]=="OjInput"){break}}}this._ready=true},_redrawDefault:function(){if(isEmpty(this._default)||!isEmpty(this._value)){this.addClasses("no-default")}else{this.removeClasses("no-default")}return true},_onDefaultClick:function(a){this.input.focus()},_onFocusIn:function(a){this.addClasses("focus","no-default")},_onFocusOut:function(a){var b=["focus"];if(isEmpty(this._value)&&this._default){b.push("no-default")}this.removeClasses.apply(this,b)},_onChange:function(a){this.setValue(this.input._dom.value)},blur:function(){this.input.blur()},focus:function(){this.input.focus()},isValid:function(){this._errors=[];return true},redraw:function(){if(this._super("OjInput","redraw",arguments)){this._redrawDefault();return true}return false},validate:function(){if(this.isValid()){this.removeClasses("error");return true}this.addClasses("error");return false},setDefault:function(a){if(this._default==a){return}if(a){this.dflt.addEventListener(OjMouseEvent.CLICK,this,"_onDefaultClick")}else{this.dflt.removeEventListener(OjMouseEvent.CLICK,this,"_onDefaultClick")}this.dflt.setText(this._default=a);this._redrawDefault()},getErrors:function(){return this._errors},setLabel:function(a){this.label.setText(this._label=a);if(isEmpty(this._label)){this.addClasses("no-label")}else{this.removeClasses("no-label")}},setPrefix:function(a){if(isString(a)){this.prefix.setText(this._prefix=a)}else{if(this._prefix){if(isString(this._prefix)){this.removeAllChildren()}else{this.prefix.removeChild(this._prefix)}}this.prefix.addChild(this._prefix=a)}},setSuffix:function(a){if(isString(a)){this.suffix.setText(this._suffix=a)}else{if(this._suffix){if(isString(this._suffix)){this.removeAllChildren()}else{this.suffix.removeChild(this._suffix)}}this.suffix.addChild(this._suffix=a)}},setValidators:function(a){this._validators=Array.array(a)},getValue:function(){return this._value},setValue:function(a){if(a!=this._value){this._value=a;if(this.input._dom.value!=a){this.input._dom.value=isSet(a)?a:"";this._redrawDefault()}if(this._ready){this.dispatchEvent(new OjEvent(OjEvent.CHANGE))}}}},{supportsInputType:function(b){var a=document.createElement("input");a.setAttribute("type",b);return a.type==b}});