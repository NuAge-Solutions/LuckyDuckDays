OJ.importJs("oj.data.Object");"use strict";OJ.extendClass(OjObject,"OjUrl",{_props_:{protocol:null,host:null,port:null,path:null,query:null,hash:null},_cache:null,_dirty:null,_hash_vars:null,_query_vars:null,_setter:function(d,b,a,c){if(!this._cache[d]||this["_"+d]!=a){this["_"+d]=a;this._cache[d]="";if(isEmpty(a)){this["_"+d]=arguments.length>4?arguments[4]:null}else{this._cache[d]=b+a+c}}},_refresh:function(){if(arguments.length&&!arguments[0]){this._dirty.query=true;this._dirty.hash=true}this.getQuery();this.getHash()},_constructor:function(){this._super("OjUrl","_constructor",[]);this._query_vars={};this._hash_vars={};this._cache={};this._dirty={};var b=document.createElement("a");b.href=arguments.length?arguments[0]:"";this.setProtocol(b.protocol);this.setHost(b.hostname);this.setPort(b.port);this.setPath(b.pathname);this.setQuery(b.search);this.setHash(b.hash);b=null;this._refresh()},clone:function(){return new OjUrl(this.toString())},toString:function(){this._refresh();return this._cache.protocol+this._cache.host+this._cache.port+this._cache.path+this._cache.query+this._cache.hash},setProtocol:function(a){this._setter("protocol","",a.replaceAll([":","/"],""),"://","http")},setHost:function(a){this._setter("host","",a,"")},setPort:function(a){this._setter("port",":",a,"")},setPath:function(a){this._setter("path","",a,"")},getQuery:function(){if(this._dirty.query){this.setQuery(Object.toQueryString(this._query_vars));delete this._dirty.query;delete this._dirty.query_vars}return this._query},setQuery:function(a){if(isString(a)&&a.charAt(0)=="?"){a=a.substr(1)}this._setter("query","?",a,"");this._dirty.query_vars=true;this.getQueryParams()},getQueryParams:function(){if(this._dirty.query_vars){this._query_vars=this._query?this._query.parseQueryString():{};delete this._dirty.query_vars}return this._query_vars},setQueryParams:function(a){this._query_vars=a;this._dirty.query=true},getQueryParam:function(a){this._query_vars=this.getQueryParams();return this._query_vars[a]},setQueryParam:function(a,b){this._query_vars=this.getQueryParams();this._query_vars[a]=b;this._dirty.query=true},getHash:function(){if(this._dirty.hash){this.setHash(Object.toQueryString(this.getHashParams()));delete this._dirty.hash}return this._hash},setHash:function(a){if(a&&a.charAt(0)=="#"){a=a.substr(1)}this._setter("hash","#",a,"");delete this._dirty.hash;this._dirty.hash_vars=true;this.getHashParams()},getHashParams:function(){if(this._dirty.hash_vars){this._hash_vars={};if(this._hash){this._hash_vars=this._hash.parseQueryString()}delete this._dirty.hash_vars}return this._hash_vars},setHashParams:function(a){this._hash_vars=a;this._dirty.hash=true;delete this._dirty.hash_params},getHashParam:function(a){this._hash_vars=this.getHashParams();return this._hash_vars[a]},setHashParam:function(a,b){this._hash_vars=this.getHashParams();if(isSet(b)){this._hash_vars[a]=b}else{delete this._hash_vars[a]}this._dirty.hash=true}},{url:function(a){if(isString(a)){return new OjUrl(a)}if(isObject(a)&&a.is("OjUrl")){return a}return new OjUrl()}});