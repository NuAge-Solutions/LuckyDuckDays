OJ.importJs("nw.components.CollectionStack");OJ.importJs("oj.timer.Timer");OJ.importCss("nw.components.Marquee");"use strict";OJ.extendClass(NwCollectionStack,"NwMarquee",{_props_:{buttonMode:null,interval:0,nextButtonIcon:null,nextButtonLabel:"Next >",prevButtonIcon:null,prevButtonLabel:"< Prev"},_timer:null,nextBtn:null,prevBtn:null,_constructor:function(){this._super("NwMarquee","_constructor",arguments);this._timer=new OjTimer(this._interval*1000,0);this._timer.addEventListener(OjTimer.TICK,this,"_onTimerTick");this.setButtonMode(NwMarquee.HIDE_BUTTONS)},_destructor:function(){this._unset("_timer");return this._super("NwMarquee","_destructor",arguments)},_setDom:function(a){var b=this._super("NwMarquee","_setDom",arguments);this.addChild(this.container=new OjStyleElement());this.container.addClasses("container");this.container.addEventListener(OjMouseEvent.OVER,this,"_onMouseOver");this.container.addEventListener(OjMouseEvent.OUT,this,"_onMouseOut");return b},_setIsDisplayed:function(a){if(this._is_displayed==a){return}this._super("NwMarquee","_setIsDisplayed",arguments);if(this._is_displayed){if(this._timer.isPaused()){this.start()}this.redraw()}else{if(this._timer.isRunning()){this._timer.pause()}}},_redrawButtons:function(){if(this._is_displayed){if(this.prevBtn){this.prevBtn.setIsDisabled(!this._allowLooping&&this._current_index<=0)}if(this.nextBtn){this.nextBtn.setIsDisabled(!this._allowLooping&&this._current_index>=this.numElms()-1)}return true}return false},_onTimerTick:function(a){this.setActiveIndex(this._current_index+1)},_onMouseOut:function(a){if(this._timer.getState()==OjTimer.PAUSED){this.start()}},_onMouseOver:function(a){if(this._timer.isRunning()){this._timer.pause()}},_onNextClick:function(a){this.next()},_onPrevClick:function(a){this.prev()},next:function(){if(this._timer.isRunning()){this._timer.restart()}this._super("NwMarquee","next",arguments)},prev:function(){if(this._timer.isRunning()){this._timer.restart()}this._super("NwMarquee","prev",arguments)},start:function(){if(this._interval){this._timer.start()}},stop:function(){this._timer.stop()},setAllowLooping:function(a){if(this._allowLooping==a){return}this._super("NwMarquee","setAllowLooping",arguments);if(!a&&(!this._current_index||this._current_index==this.numItems()-1)){this._redrawButtons()}},setButtonMode:function(a){if(this._buttonMode==a){return}if(this._buttonMode){this.removeClasses(this._buttonMode)}this.addClasses(this._buttonMode=a);if(this._buttonMode==this._static.HIDE_BUTTONS){this.removeChild(this.prevBtn);this.removeChild(this.nextBtn)}else{if(!this.prevBtn){this.prevBtn=new OjButton(this._prevButtonLabel,this._prevButtonIcon);this.prevBtn.addClasses("prevBtn");this.prevBtn.addEventListener(OjMouseEvent.CLICK,this,"_onPrevClick")}this.addChild(this.prevBtn);if(!this.nextBtn){this.nextBtn=new OjButton(this._nextButtonLabel,this._nextButtonIcon);this.nextBtn.addClasses("nextBtn");this.nextBtn.addEventListener(OjMouseEvent.CLICK,this,"_onNextClick")}this.addChild(this.nextBtn)}},setInterval:function(a){this._interval=a;this._timer.setDuration(a*1000)},setIsDisabled:function(a){if(this._isDisabled==a){return}this._super("NwCollectionStack","setIsDisabled",arguments);if(this._isDisabled&&this._timer.isRunning()){this._timer.pause()}else{if(!this._isDisabled&&this._timer.isPaused()){this.start()}}},setNextButtonIcon:function(a){if(this._nextButtonIcon==a){return}this._nextButtonIcon=a;if(this.nextBtn){this.nextBtn.setIcon(a)}},setNextButtonLabel:function(a){if(this._nextButtonLabel==a){return}this._nextButtonLabel=a;if(this.nextBtn){this.nextBtn.setLabel(a)}},setPrevButtonIcon:function(a){if(this._prevButtonIcon==a){return}this._prevButtonIcon=a;if(this.prevBtn){this.prevBtn.setIcon(a)}},setPrevButtonLabel:function(a){if(this._prevButtonLabel==a){return}this._prevButtonLabel=a;if(this.prevBtn){this.prevBtn.setLabel(a)}}},{HIDE_BUTTONS:"hide-buttons",HOVER_BUTTONS:"hover-buttons",SHOW_BUTTONS:"show-buttons"});