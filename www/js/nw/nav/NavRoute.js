OJ.importJs("oj.data.Collection");OJ.importJs("nw.nav.NavRouteEvent");"use strict";OJ.extendClass(OjActionable,"NwNavRoute",OJ.implementInterface(OjICollection,{_props_:{"arguments":null,icon:null,parent:null,path:null,items:null,title:null,viewClassName:null,viewClassPath:null},_active:false,_path_match:null,_view:null,_constructor:function(b){this._super("NwNavRoute","_constructor",[]);this.setPath(b);var a=arguments.length;if(a>1){this.setTitle(arguments[1]);if(a>2){this.setIcon(arguments[2]);if(a>3){this.setViewClassPath(arguments[3]);if(a>4){this.setViewClassName(arguments[4]);if(a>5){this.setItems(arguments[5])}}}}}},_destructor:function(){OJ.destroy(this._items);return this._super("NwNavRoute","_destructor",arguments)},_onItemAdd:function(a){a.getItem().setParent(this);this.dispatchEvent(new NwNavRouteEvent(NwNavRouteEvent.CHANGE))},_onItemRemove:function(a){a.getItem().setParent(null);this.dispatchEvent(new NwNavRouteEvent(NwNavRouteEvent.CHANGE))},_onItemReplace:function(a){a.getItem().setParent(this);a.getOldItem().setParent(null);this.dispatchEvent(new NwNavRouteEvent(NwNavRouteEvent.CHANGE))},_getItemByPath:function(f,a){var e,b,d=[],g,c={};for(e=a.length;e--;){b=a[e];if(g=b.pathMatchQuality(f)){if(!c[g]){c[g]=b}if(g==1){return c}}d=b.getItems().concat(d)}if(d.length){return OJ.merge(c,this._getRouteByPath(f,d))}return c},_prepareItems:function(){if(this._items){return}this._items=new OjCollection();this._items.setAllowDuplicate(false);this._items.addEventListener(OjCollectionEvent.ITEM_ADD,this,"_onItemAdd");this._items.addEventListener(OjCollectionEvent.ITEM_REMOVE,this,"_onItemRemove");this._items.addEventListener(OjCollectionEvent.ITEM_REPLACE,this,"_onItemReplace")},defaultItem:function(){return this.numItems()?this.getItemAt(0):null},getItemByPath:function(b){var a=this.numItems()?this._getItemByPath(b,this.getItems()):{};if(a["1"]){return a["1"]}var d,c=99999;for(d in a){if(c>(d=parseInt(d))){c=d}}return c==99999?null:a[c]},dispatchEvent:function(a){this._super("NwNavRoute","dispatchEvent",arguments);if(this._parent){this._parent.dispatchEvent(a)}},hasChildRoute:function(a){var b=this.numItems(),c;for(;b--;){c=this.getItemAt(b);if(c==a){return true}}b=this.numItems();for(;b--;){c=this.getItemAt(b);if(c.hasChildRoute(a)){return true}}return false},hasParentRoute:function(a){var b=this;while(b&&(b=b.getParent())){if(b==a){return true}}return false},isActive:function(){if(arguments.length&&this._active!=arguments[0]){this._active=arguments[0]}return this._active},load:function(){this.dispatchEvent(new NwNavRouteEvent(NwNavRouteEvent.LOAD,Array.array(arguments)))},pathIsMatch:function(b){if(b){var a=b.match(this._path_match);return a&&a.length&&a[0]==b}return false},pathMatchQuality:function(a){if(this._path==a){return 1}if(this.pathIsMatch(a)){return 2+Math.abs(this._path.split("/").length-a.split("/").length)}return 0},pathWithArguments:function(c){var g=this._path;if(c.length){var f=g.split("/"),d,b=0,e=f.length,a=c.length;for(d=0;d<e;d++){if(f[d]=="*"){f[d]=b<a?c[b++]:""}}g=f.join("/")}return g},setIcon:function(a){if(this._icon!=a){this._icon=a}},setParent:function(a){if(this._parent!=a){this._parent=a}},setPath:function(a){if(this._path!=a){this._path=a;this._path_match=a.replace(/\*/g,"[^ ]*")}},setTitle:function(a){if(this._title!=a){this._title=a}},getView:function(){if(this._view||!this._viewClassName||!this._viewClassPath){return this._view}var a=OJ.toClass(this._viewClassName);if(!a){OJ.importJs(this._viewClassPath);a=OJ.toClass(this._viewClassName)}this._view=new a(this);return this._view}}));