OJ.importJs("nw.app.App");OJ.importJs("nw.app.Session");OJ.importJs("nw.utils.CacheManager");OJ.importJs("oj.events.Actionable");OJ.importJs("oj.events.Event");"use strict";OJ.extendManager("AppManager",OjActionable,"NwAppManager",{_props_:{app:null,session:null,user:null},_oj_ready:false,_constructor:function(){this._super("NwAppManager","_constructor",arguments);if(OJ.isReady()){this._onOjReady(null)}else{OJ.addEventListener(OjEvent.READY,this,"_onOjReady")}},_initApp:function(){if(this._oj_ready&&this._app&&OJ.isSupported()){this._session=this._app.init()}},_onOjReady:function(a){if(!this._oj_ready){this._oj_ready=true;OJ.removeEventListener(OjEvent.READY,this,"_onOjReady");this._initApp()}},apiRequest:function(b,a){if(!this._app){throw new Error("No application initialized.")}return this._app.apiRequest.apply(this._app,arguments)},getSession:function(){if(!this._session&&this._app){this._session=this._app.getSession()}return this._session},getUser:function(){if(!this._user&&this.getSession()){this._user=this._session.getUser()}return this._user},hideLoading:function(){this._app.hideLoading()},init:function(a){if(arguments.length){this._app=arguments[0];this._initApp()}return this},isLoggedIn:function(){return this._app.isLoggedIn()},login:function(){return this._app.login.apply(this._app,arguments)},logout:function(){return this._app.logout.apply(this._app,arguments)},showLoading:function(){this._app.showLoading.apply(this._app,arguments)},userIsAdmin:function(){var a=arguments.length?arguments[0]:this.getUser();var b=a?a.getRoles():null;return b&&b.indexOf("admin")>-1}});OjStyleElement.registerComponentTag("app",function(c){var a=window[c.getAttribute("class-name")];var b=new a();AppManager.init(b);return b});