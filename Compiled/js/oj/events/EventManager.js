OJ.importJs("oj.data.Object");OJ.importJs("oj.events.Event");"use strict";OJ.extendManager("EventManager",OjObject,"OjEventManager",{_events:{},_index:{},_constructor:function(){this._super("OjEventManager","_constructor",arguments);var c,d;var b=function(f){if(f&&f.type=="DOMContentLoaded"){a()}else{if(f&&f.type=="load"){a()}else{if(document.readyState){if((/loaded|complete/).test(document.readyState)){a()}else{if(!!document.documentElement.doScroll){try{c||document.documentElement.doScroll("left")}catch(f){return}a()}}}}}};var a=function(){if(!c){c=true;if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",b,false)}document.onreadystatechange=null;window.onload=null;clearInterval(d);d=null;window.onDomReady()}};if(document.addEventListener){document.addEventListener("DOMContentLoaded",b,false)}document.onreadystatechange=b;d=setInterval(b,5);window.onload=b;return this},_dispatchEvents:function(a,e,g){if(a.isCanceled()){return}var c=g.id();a._currentTarget=g;if(this._events[e]&&this._events[e][c]){var d=this._events[e][c],f,b;for(b in d){f=d[b];if(f&&isFunction(f.callback)){f.callback.call(f.context,a)}}d=f=b=null}c=null},_getIndex:function(a,b){if(!this._index[a]){this._index[a]={}}this._index[a][b[0]+":"+b[1]+":"+b[3]]=b},addEventListener:function(f,d,c,g){if(!this._events[d]){this._events[d]={}}g=isString(g)?c[g]:g;var b=f.id(),e=c==window?"window":c.id(),a=e+":"+(g.guid?g.guid:g.guid=OJ.guid());if(!this._events[d][b]){this._events[d][f.id()]={}}if(!this._events[d][b][a]){this._events[d][b][a]={callback:g,context:c};this._getIndex(b,[b,d,e,a]);this._getIndex(e,[b,d,e,a])}},dispatchEvent:function(d,a){var c=a.getType();a._target=a._target?a._target:d;a._currentTarget=d;this._dispatchEvents(a,c,d);if(a._bubbles){var b=d;while(b&&isFunction(b.parent)&&(b=b.parent())){this._dispatchEvents(a,c,b)}if(b&&b!=OJ){this._dispatchEvents(a,c,OJ)}}},hasEventListener:function(b,a){if(this._events[a]&&this._events[a][b.id()]){return true}return false},_removeEventListener:function(c,d,e,b){if(this._events[d]&&this._events[d][c]&&this._events[d][c][b]){delete this._events[d][c][b];if(isEmptyObject(this._events[d][c])){delete this._events[d][c];if(isEmptyObject(this._events[d])){delete this._events[d]}}}var a=c+":"+d+":"+b;if(this._index[c]&&this._index[c][a]){delete this._index[c][a];if(isEmptyObject(this._index[c])){delete this._index[c]}}if(this._index[e]&&this._index[e][a]){delete this._index[e][a];if(isEmptyObject(this._index[e])){delete this._index[e]}}},removeAllListeners:function(d){var c=d.id(),b,a;if(b=this._index[c]){for(a in b){this._removeEventListener.apply(this,b[a])}delete this._index[c]}},removeEventListener:function(f,d,c,g){if(this._events[d]){var b=f.id();if(this._events[d][b]){if(g=isString(g)?c[g]:g){var e=c.id(),a=e+":"+g.guid;if(this._events[d][b][a]){this._removeEventListener(b,d,e,a)}}}}}});