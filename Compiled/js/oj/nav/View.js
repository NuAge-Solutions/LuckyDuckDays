OJ.importJs("oj.components.Component");OJ.importJs("oj.components.Overlay");OJ.importCss("oj.nav.View");"use strict";OJ.extendComponent(OjComponent,"OjView",{_props_:{controller:null,footer:null,header:null,shortTitle:null,stack:null,title:null},_get_props_:{actionView:null,cancelView:null,titleView:null},_elm_funcs:null,_load_checkpoints:null,_loading_icon:null,_loading_msg:"Loading",_overlay:null,_template:"oj.nav.View",_unload_checkpoints:null,_unloading_icon:null,_unloading_msg:"UnLoading",_constructor:function(){this._super("OjView","_constructor",[]);this._load_checkpoints={};this._unload_checkpoints={};var a=arguments,b=a.length,d=this._static.SHORT_TITLE,c=this._static.TITLE;if(b){this.setContent(a[0]);if(b>1){c=a[1];if(b>2){d=a[2]}}}this.setTitle(c);if(d){this.setShortTitle(d)}},_destructor:function(){this._unset("_actionView");this._unset("_cancelView");this._unset("_titleView");this._unset("_overlay");return this._super("OjView","_destructor",arguments)},_checkpointsCompleted:function(b){var a;for(a in b){if(!b[a]){return false}}return true},_hideOverlay:function(){if(this._overlay){this._overlay.addEventListener(OjEvent.HIDE,this,"_onOverlayHide");this._overlay.hide()}},_load:function(b,a){this.redraw();this._hideOverlay();this.dispatchEvent(new OjEvent(OjView.LOAD))},_loadCheckpoint:function(){var a=arguments;if(a.length){this._load_checkpoints[a[0]]=true}if(this._checkpointsCompleted(this._load_checkpoints)){this._load()}else{this._showOverlay(this._loading_msg,this._loading_icon)}},_resetCheckpoints:function(b){var a;for(a in b){b[a]=false}},_showOverlay:function(){var a=arguments,c=a.length,d=c?a[0]:null,b=c>1?a[1]:null;if(this._overlay){this._overlay.setMessage(d);this._overlay.setIcon(b)}else{this._overlay=new OjOverlay(d,b)}this._overlay.show(this)},_unload:function(){this._hideOverlay();this.dispatchEvent(new OjEvent(OjView.UNLOAD))},_unloadCheckpoint:function(){var a=arguments;if(a.length){this._unload_checkpoints[a[0]]=true}if(this._checkpointsCompleted(this._unload_checkpoints)){this._unload()}else{this._showOverlay(this._unloading_msg,this._unloading_icon)}},_onOverlayHide:function(a){this._unset("_overlay")},load:function(){this._resetCheckpoints(this._load_checkpoints);this._loadCheckpoint()},unload:function(){this._resetCheckpoints(this._unload_checkpoints);this._unloadCheckpoint()},getContent:function(){return this.getElms()},setContent:function(b){this.removeAllElms();if(b){b=Array.array(b);var a=b.length;for(;a--;){this.addElmAt(b[a],0)}}},setFooter:function(a){if(this._footer=a){this.removeClasses("no-footer");if(!this.footer){this.footer=new OjStyleElement();this.footer.addClasses("footer");this.addChildAt(this.footer,0)}this.footer.removeAllChildren();this.footer.addChild(a)}else{this._unset("footer");this.addClasses("no-footer")}},setHeader:function(a){if(this._header=a){this.removeClasses("no-header");if(!this.header){this.header=new OjStyleElement();this.header.addClasses("header");this.addChildAt(this.header,0)}this.header.removeAllChildren();this.header.addChild(a)}else{this._unset("header");this.addClasses("no-header")}},setTitle:function(a){this._title=a;if(!this._shortTitle){this._shortTitle=a}}},{SHORT_TITLE:null,TITLE:null,HORIZONTAL:"horizontal",VERTICAL:"vertical",TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",LOAD:"onViewLoad",UNLOAD:"onViewUnload",_TAGS:["view"]});