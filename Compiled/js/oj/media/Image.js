OJ.importJs("oj.events.Event");OJ.importJs("oj.media.Media");"use strict";OJ.extendComponent(OjMedia,"OjImage",{_callback:null,_destructor:function(){this.media.dom().removeEventListener("load",this._callback);this._callback=null;return this._super("OjImage","_destructor",arguments)},_makeMedia:function(){var a=new OjStyleElement("<img />");a.hide();a.dom().addEventListener("load",this._callback=this._onMediaLoad.bind(this));return a},_onMediaLoad:function(a){var b=this._super("OjImage","_onMediaLoad",arguments);this.media.show();return b},_setSource:function(a){if(this._source_is_css){this.media.removeClasses(this._source.substring(1))}this._super("OjImage","_setSource",arguments);this._loaded=false;if(a){this.media.hide();this.addChild(this.media);if(this._source_is_css){this.media.addClasses(a.substring(1));this.media.setAttr("src",OJ.getAssetPath("oj/empty.png"));this._onMediaLoad(null)}else{this.media.setAttr("src",a)}}else{this.removeChild(this.media);this.media.setAttr("src",null)}}},{_TAGS:["img","image"]});