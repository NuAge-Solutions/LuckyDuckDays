OJ.importCss("oj.components.Spinner");"use strict";OJ.extendComponent(OjComponent,"OjSpinner",{_props_:{numBlades:null,period:1,tint:"#FFFFFF"},_position:0,_template:"oj.components.Spinner",_timer:null,_running:false,_constructor:function(){this._super("OjSpinner","_constructor",[]);var a=arguments,b=a.length,c=13;if(b){this.setTint(a[0]);if(b>1){this.setPeriod(a[1]);if(b>2){c=a[2]}}}this._timer=new OjTimer(1000,0);this._timer.addEventListener(OjTimer.TICK,this,"_onTimer");this.setNumBlades(c);this.start()},_destructor:function(){OJ.destroy(this._timer);return this._super("OjSpinner","_destructor",arguments)},_setIsDisplayed:function(){this._super("OjSpinner","_setIsDisplayed",arguments);if(this._is_displayed){this._timer.start()}else{this._timer.stop()}},_updateTimer:function(){this._timer.setDuration((this._period*1000)/this._numBlades)},_onTimer:function(){if(this._position==0){this._position=this._numBlades}this._position--;this.redraw()},hide:function(){this._timer.pause();this._super("OjSpinner","hide",arguments)},redraw:function(){if(this._super("OjSpinner","redraw",arguments)){var a=this._numBlades,c,b;while(a-->0){c=this.wrapper.getChildAt(a);b=(a-this._position)%this._numBlades;if(b<0){b=b+this._numBlades}c.setAlpha(Math.max(1-(b/this._numBlades),0.2))}return true}return false},show:function(){if(this._running){this._timer.start()}this._super("OjSpinner","show",arguments)},start:function(){this._timer.start();this._running=true},stop:function(){this._timer.pause();this._running=false},setAlpha:function(a){if(this._running){if(a==0){this._timer.pause()}else{this._timer.start()}}this._super("OjSpinner","setAlpha",arguments)},setNumBlades:function(c){if(this._numBlades==c){return}this._numBlades=c;var a=this._numBlades,b=360/a;var d;for(;a--;){d=new OjStyleElement();d.addClasses("blade");d.setRotation(b*a);d.setTranslate("70%, 0px");d.setBackgroundColor(this._tint);this.wrapper.addChild(d)}this.redraw();this._updateTimer()},setPeriod:function(a){if(this._period==a){return}this._period=a;this._updateTimer()},setTint:function(b){if(this._tint==b){return}this._tint=b;var a=this._numBlades,d,c;while(a-->0){this.wrapper.getChildAt(a).setBackgroundColor(this._tint)}}},{_TAGS:["spinner"]});